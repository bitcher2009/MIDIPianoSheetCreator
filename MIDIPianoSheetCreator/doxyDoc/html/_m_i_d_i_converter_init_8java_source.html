<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>MIDIPianoSheetCreator: src/com/lclion/midigui/MIDIConverterInit.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icongrey.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MIDIPianoSheetCreator
   &#160;<span id="projectnumber">Alpha v0.8</span>
   </div>
   <div id="projectbrief">Creates Piano Sheets from MIDI Files for the Virtual Piano and GMT Playable Piano</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_m_i_d_i_converter_init_8java_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MIDIConverterInit.java</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_m_i_d_i_converter_init_8java.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">package </span>com.lclion.midigui;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> java.awt.Component;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">import</span> java.awt.Container;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">import</span> java.awt.Dimension;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">import</span> java.awt.EventQueue;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">import</span> java.awt.Toolkit;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">import</span> java.awt.Color;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">import</span> java.awt.event.ActionListener;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">import</span> java.awt.event.ActionEvent;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> java.awt.event.AdjustmentEvent;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">import</span> java.awt.event.AdjustmentListener;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">import</span> java.awt.Font;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">import</span> javax.swing.JFrame;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">import</span> javax.swing.JPanel;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">import</span> javax.swing.border.EmptyBorder;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">import</span> javax.swing.JButton;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">import</span> javax.swing.JFileChooser;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">import</span> javax.swing.text.AttributeSet;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">import</span> javax.swing.text.BadLocationException;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">import</span> javax.swing.text.DefaultStyledDocument;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">import</span> javax.swing.text.SimpleAttributeSet;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">import</span> javax.swing.text.StyleConstants;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">import</span> javax.swing.text.StyleContext;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">import</span> javax.swing.text.StyledDocument;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">import</span> javax.swing.Icon;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">import</span> javax.swing.ImageIcon;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">import</span> javax.swing.JEditorPane;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">import</span> javax.swing.JLabel;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">import</span> javax.swing.JMenuBar;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">import</span> javax.swing.JMenu;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">import</span> javax.swing.JMenuItem;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">import</span> javax.swing.JOptionPane;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">import</span> javax.swing.JScrollPane;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">import</span> javax.swing.SwingWorker;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">import</span> javax.swing.Timer;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">import</span> javax.swing.UIManager.LookAndFeelInfo;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">import</span> javax.swing.UnsupportedLookAndFeelException;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">import</span> javax.swing.border.TitledBorder;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">import</span> javax.swing.JLayeredPane;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">import</span> javax.swing.JTextPane;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">import</span> javax.swing.JProgressBar;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">import</span> javax.swing.border.EtchedBorder;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">import</span> javax.swing.UIManager;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">import</span> javax.swing.ScrollPaneConstants;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">import</span> javax.swing.GroupLayout;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">import</span> javax.swing.GroupLayout.Alignment;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">import</span> javax.swing.LayoutStyle.ComponentPlacement;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">import</span> javax.swing.JSlider;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">import</span> java.io.BufferedWriter;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">import</span> java.io.File;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">import</span> java.io.FileWriter;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">import</span> java.io.IOException;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">import</span> java.io.Writer;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">import</span> java.util.ArrayList;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//import midiparser.StringNotesParser;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/*import org.pushingpixels.substance.api.skin.GraphiteGlassSkin;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceBusinessBlackSteelLookAndFeel;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceBusinessBlueSteelLookAndFeel;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceBusinessLookAndFeel;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceCremeCoffeeLookAndFeel;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceDustCoffeeLookAndFeel;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceDustLookAndFeel;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceGraphiteAquaLookAndFeel;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceGraphiteGlassLookAndFeel;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceGraphiteLookAndFeel;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceMagellanLookAndFeel;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceMarinerLookAndFeel;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceMistSilverLookAndFeel;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceModerateLookAndFeel;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceNebulaLookAndFeel;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceOfficeBlack2007LookAndFeel;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceRavenLookAndFeel;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceSaharaLookAndFeel;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> import org.pushingpixels.substance.api.skin.SubstanceTwilightLookAndFeel;*/</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keyword">import</span> javax.swing.event.ChangeListener;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">import</span> javax.swing.event.ChangeEvent;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">import</span> javax.swing.JCheckBoxMenuItem;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceAutumnLookAndFeel;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceBusinessBlackSteelLookAndFeel;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceBusinessBlueSteelLookAndFeel;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceBusinessLookAndFeel;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceCremeLookAndFeel;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceEmeraldDuskLookAndFeel;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceGeminiLookAndFeel;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceGraphiteAquaLookAndFeel;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceGraphiteGlassLookAndFeel;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceGraphiteLookAndFeel;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceMarinerLookAndFeel;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceNebulaLookAndFeel;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceOfficeBlack2007LookAndFeel;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceOfficeSilver2007LookAndFeel;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceRavenLookAndFeel;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">import</span> org.pushingpixels.substance.api.skin.SubstanceTwilightLookAndFeel;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1lclion.html">lclion</a>.<a class="code" href="namespacecom_1_1lclion_1_1midiparser.html">midiparser</a>.<a class="code" href="classcom_1_1lclion_1_1midiparser_1_1_m_i_d_i_parser.html">MIDIParser</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1lclion.html">lclion</a>.<a class="code" href="namespacecom_1_1lclion_1_1midiparser.html">midiparser</a>.<a class="code" href="classcom_1_1lclion_1_1midiparser_1_1_note_colour_converter.html">NoteColourConverter</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1lclion.html">lclion</a>.<a class="code" href="namespacecom_1_1lclion_1_1midiplayer.html">midiplayer</a>.<a class="code" href="classcom_1_1lclion_1_1midiplayer_1_1_m_i_d_i_player.html">MIDIPlayer</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacecom.html">com</a>.<a class="code" href="namespacecom_1_1lclion.html">lclion</a>.<a class="code" href="namespacecom_1_1lclion_1_1utils.html">utils</a>.<a class="code" href="classcom_1_1lclion_1_1utils_1_1_file_extension_filter.html">FileExtensionFilter</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">import</span> javax.swing.JSpinner;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">import</span> javax.swing.SpinnerNumberModel;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;@SuppressWarnings(<span class="stringliteral">&quot;serial&quot;</span>)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;public class MIDIConverterInit extends JFrame</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> JFrame frameHolder = null; <span class="comment">// Holds frame object to pass to dialogs so they appear relative</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">private</span> JPanel contentPane = null;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keyword">private</span> JTextPane tpKeyEditor;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">private</span> JScrollPane spKeyEditor;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keyword">private</span> JMenuItem mntmOpen;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keyword">private</span> JMenuItem mntmSave;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keyword">private</span> JProgressBar progressBar;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keyword">private</span> JSlider sliderTime;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">private</span> JSlider sliderVolume;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keyword">private</span> JButton btnPlay;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keyword">private</span> JButton btnStop;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// Init all custom dialogs</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> DialogAbout dialogAbout = null;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> DialogPreferences dialogPreferences = null;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> DialogTrackImport dialogTrackImport = null;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> DialogColourReference dialogColourReference = null;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> DialogOnScreenKeyboard dialogOnScreenKeyboard = null;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> DialogOnScreenPiano dialogOnScreenPiano = null;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keyword">private</span> MIDIPlayer midiPlayer = null;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keyword">private</span> String openFileName = null;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">private</span> String dirFileName = null;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">private</span> String lastDirectory = null;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">private</span> MIDIParser midiParser = null;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// private StringNotesParser snp = null; // Not used at this time</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">private</span> String currentFont = <span class="stringliteral">&quot;Verdana&quot;</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">private</span> Timer autoplayTimer = null; <span class="comment">// Timer to initiate listener and check text</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">int</span> currentPatchNum = -1;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">int</span> currentFontSize = 12;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keyword">private</span> NoteColourConverter noteColourConverter = null;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// private StyledDocument defaultStyledDocument; // Oddly, this container does not work</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">private</span> JMenuBar menuBar;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keyword">private</span> JMenu mnFont;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// Ok, I didn&#39;t know you could use WindowBuilder Factory, fix this</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem chckbxmntmAcousticGrandPiano;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem chckbxmntmBrightAcousticPiano;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem chckbxmntmElectricGrandPiano;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem chckbxmntmUseMidiDefault;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem chckbxmntmHonkyTonkPiano;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem chckbxmntmElectricPiano1;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem chckbxmntmElectricPiano2;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem chckbxmntmHarpsichord;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem chckbxmntmClavinet;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSize_8;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSize_10;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSize_12;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSize_14;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSize_16;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSize_18;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSize_24;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSize_36;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSize_48;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmLucidaConsole;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmTahoma;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmVerdana;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">private</span> JCheckBoxMenuItem mntmSegoeUi;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">private</span> JMenu mnView;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keyword">private</span> JMenuItem mntmColourNoteValues;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">private</span> JMenuItem mntmOnscreenKeyboard;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keyword">private</span> JSpinner spinnerSpeed;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">private</span> JLabel lblSpeed;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">private</span> JMenuItem mntmOnscreenPiano;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> main(String[] args)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="comment">// Initiate the default theme</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="comment">// Initiate the Nimbus theme</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">for</span> (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels())</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <span class="keywordflow">if</span> (<span class="stringliteral">&quot;Nimbus&quot;</span>.equals(info.getName()))</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    UIManager.setLookAndFeel(info.getClassName());</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="comment">// Initiate the Windows Theme. This is the desired look and feel for the program, if it fails,</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="comment">// it&#39;ll fall back to the last initiated theme</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            UIManager.setLookAndFeel(<span class="stringliteral">&quot;com.sun.java.swing.plaf.windows.WindowsLookAndFeel&quot;</span>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        } <span class="keywordflow">catch</span> (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e1)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="comment">// TODO Auto-generated catch block</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            e1.printStackTrace();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">// SubstanceGraphiteGlassLookAndFeel</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">// SubstanceRavenLookAndFeel</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// Substantiate Look and Feel Theme</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// *Code Deleted*</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="comment">// Unknown reasons why it has to be instantiated twice, else you may get a Null Pointer Exception.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            UIManager.setLookAndFeel(<span class="keyword">new</span> SubstanceGraphiteLookAndFeel());</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            UIManager.setLookAndFeel(<span class="keyword">new</span> SubstanceGraphiteLookAndFeel());</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        } <span class="keywordflow">catch</span> (UnsupportedLookAndFeelException e1)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="comment">// TODO Auto-generated catch block</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            e1.printStackTrace();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">// Java Swing Event Dispatch Thread (EDT)</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        EventQueue.invokeLater(<span class="keyword">new</span> Runnable()</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> run()</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    <span class="comment">// Init Main GUI, nuclear launch detected.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    MIDIConverterInit frame = <span class="keyword">new</span> MIDIConverterInit();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                    frame.setMinimumSize(<span class="keyword">new</span> Dimension(505, 585));</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    frame.setLocationRelativeTo(null);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                    frame.setVisible(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                    frame.setIconImage(<span class="keyword">new</span> ImageIcon(getClass().getResource(<span class="stringliteral">&quot;/resources/images/icongrey.png&quot;</span>)).getImage());</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                    <span class="comment">// Init Dialogs</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    dialogAbout = <span class="keyword">new</span> DialogAbout(frame);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    dialogAbout.setLocationRelativeTo(frame);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                    dialogPreferences = <span class="keyword">new</span> DialogPreferences(frame);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    dialogPreferences.setLocationRelativeTo(frame);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    dialogColourReference = <span class="keyword">new</span> DialogColourReference(frame);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                    dialogColourReference.setLocationRelativeTo(frame);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    dialogOnScreenKeyboard = <span class="keyword">new</span> DialogOnScreenKeyboard(frame);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                    dialogOnScreenKeyboard.setLocationRelativeTo(frame);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                    dialogOnScreenPiano = <span class="keyword">new</span> DialogOnScreenPiano(frame);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    dialogOnScreenPiano.setLocationRelativeTo(frame);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                    </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    frameHolder = frame;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    <span class="comment">// Signal Debug / Command Prompt</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    System.out.println(<span class="stringliteral">&quot;Program launched. Keep this window open for debug out&quot;</span>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                } <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    e.printStackTrace();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        });</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// Create GUI Frame, as well as GUI Frame logic</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keyword">private</span> MIDIConverterInit()</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">// GUI must be declared and initialized in order of GUI hierarchy as below, do not change order unless you know what you&#39;re doing</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        setResizable(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        setTitle(<span class="stringliteral">&quot;MIDI to Computer Keys Converter - v0.8 alpha&quot;</span>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="comment">// Setup the Main Content Pane</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        contentPane = <span class="keyword">new</span> JPanel();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        contentPane.setBackground(<span class="keyword">new</span> Color(0x585858));</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        contentPane.setBorder(<span class="keyword">new</span> EmptyBorder(5, 5, 5, 5));</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        setContentPane(contentPane);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="comment">// Init Layered Pane to be used in ContentPane</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        JLayeredPane layeredPane = <span class="keyword">new</span> JLayeredPane();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        layeredPane.setBorder(<span class="keyword">new</span> TitledBorder(<span class="keyword">new</span> EtchedBorder(EtchedBorder.LOWERED, null, null), <span class="stringliteral">&quot;Key Editor&quot;</span>, TitledBorder.LEADING, TitledBorder.TOP, null, null));</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="comment">// Init all Main Window GUI&#39;s - it&#39;s important not to change this order as some GUI&#39;s rely on others to initialize first.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        initProgressSliders();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        initTextPane();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        initMenuBar();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        initButtons();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">// GroupLayout for ContentPane</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        GroupLayout gl_contentPane = <span class="keyword">new</span> GroupLayout(contentPane);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        gl_contentPane.setHorizontalGroup(gl_contentPane.createParallelGroup(Alignment.TRAILING).addGroup(gl_contentPane.createSequentialGroup().addGroup(gl_contentPane.createParallelGroup(Alignment.TRAILING).addComponent(layeredPane, Alignment.LEADING, GroupLayout.DEFAULT_SIZE, 449, Short.MAX_VALUE).addComponent(progressBar, GroupLayout.DEFAULT_SIZE, 449, Short.MAX_VALUE)).addGap(0)));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        gl_contentPane.setVerticalGroup(gl_contentPane.createParallelGroup(Alignment.LEADING).addGroup(Alignment.TRAILING, gl_contentPane.createSequentialGroup().addComponent(layeredPane, GroupLayout.PREFERRED_SIZE, 492, Short.MAX_VALUE).addPreferredGap(ComponentPlacement.RELATED).addComponent(progressBar, GroupLayout.PREFERRED_SIZE, 20, GroupLayout.PREFERRED_SIZE).addGap(9)));</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        JLabel lblVolume = <span class="keyword">new</span> JLabel(<span class="stringliteral">&quot;Volume:&quot;</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        spinnerSpeed = <span class="keyword">new</span> JSpinner();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        spinnerSpeed.addChangeListener(<span class="keyword">new</span> ChangeListener() {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> stateChanged(ChangeEvent evt) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                midiPlayer.setSpeed((<span class="keywordtype">float</span>) spinnerSpeed.getValue());</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        });</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        spinnerSpeed.setModel(<span class="keyword">new</span> SpinnerNumberModel(<span class="keyword">new</span> Float(1), <span class="keyword">new</span> Float(0.1), null, <span class="keyword">new</span> Float(0.1)));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        spinnerSpeed.setEnabled(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        lblSpeed = <span class="keyword">new</span> JLabel(<span class="stringliteral">&quot;Speed:&quot;</span>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        GroupLayout gl_layeredPane = <span class="keyword">new</span> GroupLayout(layeredPane);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        gl_layeredPane.setHorizontalGroup(</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            gl_layeredPane.createParallelGroup(Alignment.LEADING)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                .addGroup(gl_layeredPane.createSequentialGroup()</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    .addGap(4)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    .addGroup(gl_layeredPane.createParallelGroup(Alignment.LEADING)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                        .addComponent(spKeyEditor, GroupLayout.DEFAULT_SIZE, 453, Short.MAX_VALUE)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                        .addGroup(gl_layeredPane.createSequentialGroup()</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                            .addComponent(btnPlay, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                            .addPreferredGap(ComponentPlacement.RELATED)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                            .addComponent(btnStop, GroupLayout.PREFERRED_SIZE, 83, GroupLayout.PREFERRED_SIZE)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                            .addPreferredGap(ComponentPlacement.RELATED, 46, Short.MAX_VALUE)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                            .addComponent(lblSpeed, GroupLayout.PREFERRED_SIZE, 43, GroupLayout.PREFERRED_SIZE)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                            .addPreferredGap(ComponentPlacement.RELATED)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                            .addComponent(spinnerSpeed, GroupLayout.PREFERRED_SIZE, 61, GroupLayout.PREFERRED_SIZE)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                            .addPreferredGap(ComponentPlacement.UNRELATED)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                            .addComponent(lblVolume)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                            .addPreferredGap(ComponentPlacement.RELATED)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                            .addComponent(sliderVolume, GroupLayout.PREFERRED_SIZE, 73, GroupLayout.PREFERRED_SIZE))</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                        .addComponent(sliderTime, GroupLayout.DEFAULT_SIZE, 453, Short.MAX_VALUE))</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                    .addContainerGap())</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        );</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        gl_layeredPane.setVerticalGroup(</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            gl_layeredPane.createParallelGroup(Alignment.TRAILING)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                .addGroup(gl_layeredPane.createSequentialGroup()</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    .addGap(5)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    .addComponent(spKeyEditor, GroupLayout.DEFAULT_SIZE, 403, Short.MAX_VALUE)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    .addPreferredGap(ComponentPlacement.RELATED)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    .addComponent(sliderTime, GroupLayout.PREFERRED_SIZE, 19, GroupLayout.PREFERRED_SIZE)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                    .addGroup(gl_layeredPane.createParallelGroup(Alignment.LEADING, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        .addGroup(gl_layeredPane.createSequentialGroup()</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                            .addGap(8)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                            .addGroup(gl_layeredPane.createParallelGroup(Alignment.BASELINE)</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                .addComponent(btnPlay, GroupLayout.PREFERRED_SIZE, 21, GroupLayout.PREFERRED_SIZE)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                                .addComponent(lblVolume)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                .addComponent(btnStop, GroupLayout.PREFERRED_SIZE, 21, GroupLayout.PREFERRED_SIZE)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                .addComponent(spinnerSpeed, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                .addComponent(lblSpeed)))</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        .addGroup(gl_layeredPane.createSequentialGroup()</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                            .addPreferredGap(ComponentPlacement.RELATED, 10, Short.MAX_VALUE)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                            .addComponent(sliderVolume, GroupLayout.PREFERRED_SIZE, 19, GroupLayout.PREFERRED_SIZE)))</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    .addGap(8))</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        );</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        layeredPane.setLayout(gl_layeredPane);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        contentPane.setLayout(gl_contentPane);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> initButtons()</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="comment">// Init play button</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        btnPlay = <span class="keyword">new</span> JButton(<span class="stringliteral">&quot;Play&quot;</span>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        btnPlay.setForeground(Color.GRAY);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        btnPlay.setBackground(Color.GRAY);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        btnPlay.setIcon(<span class="keyword">new</span> ImageIcon(getClass().getResource(<span class="stringliteral">&quot;/resources/images/control_play_blue.png&quot;</span>)));</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        btnPlay.setEnabled(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="comment">// Init stop button</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        btnStop = <span class="keyword">new</span> JButton(<span class="stringliteral">&quot;Stop&quot;</span>);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        btnStop.setBackground(Color.GRAY);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        btnStop.setForeground(Color.GRAY);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        btnStop.setIcon(<span class="keyword">new</span> ImageIcon(getClass().getResource(<span class="stringliteral">&quot;/resources/images/control_stop_blue.png&quot;</span>)));</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        btnStop.setEnabled(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="comment">// Action Listeners (event driven)</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        btnStop.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <span class="comment">// Stop playing and</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                tpKeyEditor.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                midiPlayer.stopMIDI();</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                midiPlayer.setInstrument(currentPatchNum);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                btnPlay.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <span class="keywordflow">if</span> (autoplayTimer != null)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    autoplayTimer.stop();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                <span class="comment">// tpKeyEditor.setForeground(new Color(192, 192, 192));</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="comment">// Re-enable style</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <span class="keyword">final</span> StyleContext cont = StyleContext.getDefaultStyleContext();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="keyword">final</span> AttributeSet grey = cont.addAttribute(cont.getEmptySet(), StyleConstants.Foreground, <span class="keyword">new</span> Color(192, 192, 192));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                tpKeyEditor.getStyledDocument().setCharacterAttributes(0, tpKeyEditor.getDocument().getLength(), grey, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                tpKeyEditor.setText(tpKeyEditor.getText());</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                <span class="keywordflow">if</span> (dialogTrackImport.isColourise())</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                    tpKeyEditor.setStyledDocument(noteColourConverter.ColouriseNotes());</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                tpKeyEditor.setCaretPosition(0);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                ;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                <span class="comment">// tpKeyEditor.setEditable(true);</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                sliderTime.setValue(0);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                btnPlay.setText(<span class="stringliteral">&quot;Play&quot;</span>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                btnPlay.setIcon(<span class="keyword">new</span> ImageIcon(getClass().getResource(<span class="stringliteral">&quot;/resources/images/control_play_blue.png&quot;</span>)));</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <span class="comment">// tpKeyEditor.setEditable(true);</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        });</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        btnPlay.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <span class="keywordflow">if</span> (!midiPlayer.isRunning())</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    btnPlay.setText(<span class="stringliteral">&quot;Pause&quot;</span>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    btnPlay.setIcon(<span class="keyword">new</span> ImageIcon(getClass().getResource(<span class="stringliteral">&quot;/resources/images/control_pause_blue.png&quot;</span>)));</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    tpKeyEditor.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    tpKeyEditor.setEditable(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    tpKeyEditor.setCaretPosition(0);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    sliderTime.setMaximum((<span class="keywordtype">int</span>) midiPlayer.getTickLength());</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    <span class="comment">// Implement here</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    midiPlayer.playMIDI();</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    midiPlayer.setInstrument(currentPatchNum);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    System.out.println(<span class="stringliteral">&quot;spKeyEditor Vertical Visible : &quot;</span> + spKeyEditor.getVerticalScrollBar().getVisibleAmount());</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                    System.out.println(<span class="stringliteral">&quot;spKeyEditor Vertical Current Value : &quot;</span> + spKeyEditor.getVerticalScrollBar().getValue());</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    System.out.println(<span class="stringliteral">&quot;spKeyEditor Vertical Total : &quot;</span> + spKeyEditor.getVerticalScrollBar().getMaximum());</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    <span class="comment">// btnPlay.setEnabled(false);</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    <span class="comment">// tpKeyEditor.getStyledDocument().setCharacterAttributes(6, 3, sas, false);</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    <span class="comment">// Setup an update listener, maybe move this to a new function</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    ActionListener updateListener = <span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                        <span class="comment">// TreeMap&lt;Long, ArrayList&lt;Integer&gt;&gt; midiData = midiParser.getTmMidiParsedData();</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                        <span class="keyword">private</span> String space = <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                        <span class="keyword">private</span> String fullText = null;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                        <span class="comment">// The current iteration of the note played</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                        <span class="keyword">private</span> <span class="keywordtype">int</span> iterator = 0;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                        <span class="keyword">private</span> <span class="keywordtype">long</span> nextEventTick = 0L;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                        <span class="keyword">private</span> <span class="keywordtype">long</span> currentTick = 0L;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                        <span class="keyword">private</span> <span class="keywordtype">int</span> length = 0; <span class="comment">// length of the current note</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        <span class="keyword">private</span> <span class="keywordtype">int</span> currentPosition = 0; <span class="comment">// The current position of note</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                        <span class="keyword">private</span> <span class="keywordtype">int</span> endPosition = 0; <span class="comment">// end position of current note</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                        <span class="keyword">private</span> <span class="keywordtype">int</span> lastCurrentPosition = 0;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                        <span class="keyword">private</span> <span class="keywordtype">int</span> lastLength = 0;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                        <span class="keywordtype">int</span> previousScrollBarPos = spKeyEditor.getVerticalScrollBar().getValue();</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                        <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                        {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                            <span class="comment">// Update slider bar</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                            sliderTime.setValue((<span class="keywordtype">int</span>) midiPlayer.getCurrentTick());</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                            </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                            <span class="comment">// Set Special Colour to Highlight the currently playing notes</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                            <span class="comment">// StyleConstants.setBold(sas, true);</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                            <span class="keyword">final</span> StyleContext cont = StyleContext.getDefaultStyleContext();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                            <span class="keyword">final</span> AttributeSet grey = cont.addAttribute(cont.getEmptySet(), StyleConstants.Foreground, <span class="keyword">new</span> Color(122, 122, 122));</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                            <span class="keyword">final</span> AttributeSet greyer = cont.addAttribute(cont.getEmptySet(), StyleConstants.Foreground, <span class="keyword">new</span> Color(122, 122, 122));</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                            <span class="keyword">final</span> AttributeSet orange = cont.addAttribute(cont.getEmptySet(), StyleConstants.Foreground, Color.ORANGE);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                            SimpleAttributeSet sas = <span class="keyword">new</span> SimpleAttributeSet();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                            SimpleAttributeSet sasNothing = <span class="keyword">new</span> SimpleAttributeSet();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                            SimpleAttributeSet sasNothinga = <span class="keyword">new</span> SimpleAttributeSet();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                            StyleConstants.setUnderline(sas, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                            <span class="keywordflow">if</span> (iterator != midiParser.getTriggerTimeSize())</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                            {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                nextEventTick = midiParser.getNextTriggerTime(iterator);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                                currentTick = midiPlayer.getCurrentTick();</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                <span class="comment">// System.out.println(&quot;nextEventTick : &quot; + nextEventTick + &quot;CurrentTick : &quot; + currentTick);</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                <span class="keywordflow">if</span> (currentTick &gt; nextEventTick)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                    iterator += 1;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                                    </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                    <span class="comment">// Update the On-Screen Keyboard if that window is visible</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                    <span class="keywordflow">if</span>(dialogOnScreenKeyboard.isVisible())</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                    {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                        dialogOnScreenKeyboard.highlightKeys(midiParser.getNextTriggerNote(iterator-1));</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                    {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                        <span class="comment">// Get the full text of the current song</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                                        fullText = tpKeyEditor.getDocument().getText(0, tpKeyEditor.getDocument().getLength());</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                                    } <span class="keywordflow">catch</span> (BadLocationException e2)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                                    {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                                        <span class="comment">// TODO Auto-generated catch block</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                                        e2.printStackTrace();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                    }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                                    </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                                    </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                                    </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                                    </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                                    </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                    endPosition = fullText.indexOf(space, currentPosition);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                    </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                                    </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                    <span class="comment">// Autoscroll</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                                    <span class="comment">/*System.out.println(&quot;previousScrollBarPos: &quot; + previousScrollBarPos);</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">                                    tpKeyEditor.setCaretPosition(endPosition);</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">                                    </span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">                                    AdjustmentListener autoScrollListener = new AdjustmentListener()</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">                                    {</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">                                        @Override</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">                                        public void adjustmentValueChanged(AdjustmentEvent evt)</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">                                        {</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">                                            // TODO Auto-generated method stub</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">                                            int type = evt.getAdjustmentType();</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">                                            switch (type) {</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">                                            case AdjustmentEvent.UNIT_INCREMENT:</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">                                              System.out.println(&quot;Scrollbar was increased by one unit&quot;);</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">                                              </span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">                                              break;</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">                                            case AdjustmentEvent.UNIT_DECREMENT:</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">                                              System.out.println(&quot;Scrollbar was decreased by one unit&quot;);</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">                                              break;</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">                                            case AdjustmentEvent.BLOCK_INCREMENT:</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">                                              System.out.println(&quot;Scrollbar was increased by one block&quot;);</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">                                              break;</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">                                            case AdjustmentEvent.BLOCK_DECREMENT:</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">                                              System.out.println(&quot;Scrollbar was decreased by one block&quot;);</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">                                              break;</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">                                            case AdjustmentEvent.TRACK:</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">                                              //System.out.println(&quot;The knob on the scrollbar was dragged&quot;);</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">                                              //if(spKeyEditor.getVerticalScrollBar().getValue() != spKeyEditor.getVerticalScrollBar().getValue())</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">                                              //</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">                                              break;</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">                                            }</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">                                        }</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">                                        </span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">                                    };</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">                                    </span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">                                    spKeyEditor.getVerticalScrollBar().addAdjustmentListener(autoScrollListener);</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">                                    </span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">                                    </span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">                                    if(previousScrollBarPos != spKeyEditor.getVerticalScrollBar().getValue())</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">                                    {</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">                                        System.out.println(&quot;Yes&quot;);</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">                                        spKeyEditor.getVerticalScrollBar().setValue((spKeyEditor.getVerticalScrollBar().getValue() + spKeyEditor.getVerticalScrollBar().getVisibleAmount()));</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">                                        //tpKeyEditor.setCaretPosition(fullText.indexOf(ch, fromIndex));</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">                                        //tpKeyEditor.setCaretPosition(currentPosition);</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">                                        previousScrollBarPos = spKeyEditor.getVerticalScrollBar().getValue() + spKeyEditor.getVerticalScrollBar().getVisibleAmount();</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">                                    }</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">                                    </span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">                                    </span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">                                    System.out.println(&quot;CurrentPos: &quot; + spKeyEditor.getVerticalScrollBar().getValue());</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">                                    </span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">                                    </span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">                                    </span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">                                    System.out.println(&quot;spKeyEditor Vertical Current Value : &quot; + spKeyEditor.getVerticalScrollBar().getValue());</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">                                    System.out.println(&quot;spKeyEditor Vertical Visible : &quot; + spKeyEditor.getVerticalScrollBar().getVisibleAmount());</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">                                    System.out.println(&quot;spKeyEditor Vertical Total  : &quot; + (spKeyEditor.getVerticalScrollBar().getValue() + spKeyEditor.getVerticalScrollBar().getVisibleAmount()));</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">                                    System.out.println(&quot;previousScrollBarPos  : &quot; + (previousScrollBarPos));</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">                                    */</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                                    </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                    length = endPosition - currentPosition;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                    <span class="comment">// Set orange to the currently located notes</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                                    <span class="keywordflow">if</span> (dialogTrackImport.isColourise())</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                    {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                                        tpKeyEditor.getStyledDocument().setCharacterAttributes(currentPosition, length, sas, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                                    }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                                        tpKeyEditor.getStyledDocument().setCharacterAttributes(currentPosition, length, orange, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                    <span class="comment">/*</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">                                     * if(length &gt;= 2) // Don&#39;t highlight the [ and ] tpKeyEditor.getStyledDocument().setCharacterAttributes(currentPosition+1, length-1, orange, false); else tpKeyEditor.getStyledDocument().setCharacterAttributes(currentPosition, length, orange, false);</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">                                     */</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                    <span class="keywordflow">if</span> (iterator != 1)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                    {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                                        tpKeyEditor.getStyledDocument().setCharacterAttributes(lastCurrentPosition, lastLength, sasNothing, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                        tpKeyEditor.getStyledDocument().setCharacterAttributes(lastCurrentPosition, lastLength, grey, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                                    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                    <span class="comment">// Configure for the next loop</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                    lastLength = length;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                    lastCurrentPosition = currentPosition;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                    <span class="comment">// If there is additional space for some reason, skip it</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                    <span class="keywordflow">if</span> (endPosition + 1 != fullText.length())</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                    {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                        <span class="keywordflow">while</span> (fullText.charAt(endPosition + 1) == <span class="charliteral">&#39; &#39;</span>)</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                        { <span class="comment">// Scan through until there is no more space</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                            System.out.println(<span class="stringliteral">&quot;Yes, space is there&quot;</span>);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                            endPosition += 1;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                        }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                    }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                    <span class="comment">// Configure for the next loop</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                    endPosition += 1;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                                    currentPosition = endPosition;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                                    <span class="comment">// tpKeyEditor.setCaretPosition(currentPosition);</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                                    length = 0;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                            }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                            {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                                <span class="comment">// Reset everything</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                iterator = 0;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                nextEventTick = 0L;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                currentTick = 0L;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                length = 0;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                currentPosition = 0; <span class="comment">// The current position that will be inserted</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                endPosition = 0; <span class="comment">// A temp</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                lastCurrentPosition = 0;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                                lastLength = 0;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                                <span class="comment">// Stop playing</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                midiPlayer.stopMIDI();</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                                midiPlayer.setInstrument(currentPatchNum);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                                autoplayTimer.stop();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                                <span class="comment">// final AttributeSet color = cont.addAttribute(cont.getEmptySet(), StyleConstants.Foreground, new Color(192, 192, 192));</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                <span class="comment">// tpKeyEditor.getStyledDocument().setCharacterAttributes(0, tpKeyEditor.getDocument().getLength(), color, false);</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                sliderTime.setValue(0);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                                btnPlay.setText(<span class="stringliteral">&quot;Play&quot;</span>);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                                btnPlay.setIcon(<span class="keyword">new</span> ImageIcon(getClass().getResource(<span class="stringliteral">&quot;/resources/images/control_play_blue.png&quot;</span>)));</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                                tpKeyEditor.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                                <span class="keyword">final</span> AttributeSet lightgrey = cont.addAttribute(cont.getEmptySet(), StyleConstants.Foreground, <span class="keyword">new</span> Color(192, 192, 192));</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                                tpKeyEditor.getStyledDocument().setCharacterAttributes(0, tpKeyEditor.getDocument().getLength(), lightgrey, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                                tpKeyEditor.setText(tpKeyEditor.getText());</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                                <span class="keywordflow">if</span> (dialogTrackImport.isColourise())</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                                    tpKeyEditor.setStyledDocument(noteColourConverter.ColouriseNotes());</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                                btnPlay.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                                autoplayTimer.stop();</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                                <span class="comment">// tpKeyEditor.setEditable(true);</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                            }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                        }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    };</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                    autoplayTimer = <span class="keyword">new</span> Timer(1, updateListener);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    autoplayTimer.start();</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                    <span class="comment">// StringNotesParser stringNoteParser = new StringNotesParser(tpKeyEditor.getText());</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                    <span class="comment">// Configure it to Pause, remember Play button is a toggle button between Play and Pause</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                    btnPlay.setText(<span class="stringliteral">&quot;Play&quot;</span>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                    btnPlay.setIcon(<span class="keyword">new</span> ImageIcon(getClass().getResource(<span class="stringliteral">&quot;/resources/images/control_play_blue.png&quot;</span>)));</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    tpKeyEditor.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    midiPlayer.pauseMIDI();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                    btnPlay.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                    autoplayTimer.stop();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    <span class="comment">// tpKeyEditor.setEditable(true);</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        });</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> initProgressSliders()</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="comment">// TODO Auto-generated method stub</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        this.progressBar = <span class="keyword">new</span> JProgressBar(0, 100);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        progressBar.setValue(0);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        progressBar.setString(<span class="stringliteral">&quot;Load a MIDI File to Parse&quot;</span>);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        progressBar.setStringPainted(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        this.sliderTime = <span class="keyword">new</span> JSlider();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        sliderTime.setForeground(Color.WHITE);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        sliderTime.setBackground(Color.GRAY);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        sliderTime.setPaintTicks(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        sliderTime.setPaintTrack(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        sliderTime.setOpaque(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        sliderTime.setValue(0);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        sliderTime.setEnabled(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        this.sliderVolume = <span class="keyword">new</span> JSlider();</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        sliderVolume.setPaintLabels(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        sliderVolume.setPaintTicks(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        sliderVolume.setBackground(Color.GRAY);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        sliderVolume.putClientProperty(<span class="stringliteral">&quot;JSlider.isFilled&quot;</span>, Boolean.TRUE);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        sliderVolume.setValue(100);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        sliderVolume.addChangeListener(<span class="keyword">new</span> ChangeListener()</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> stateChanged(ChangeEvent arg0)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                midiPlayer.setVolume(sliderVolume.getValue());</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        });</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> initTextPane()</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="comment">// TODO Auto-generated method stub</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="comment">// scroll bar on top of text pane</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        tpKeyEditor = <span class="keyword">new</span> JTextPane()</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="comment">// Override so when setting String to the JTextPane, horizontal (width) works as intended</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            @Override</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">boolean</span> getScrollableTracksViewportWidth()</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <span class="keywordflow">return</span> getUI().getPreferredSize(<span class="keyword">this</span>).width &lt;= getParent().getSize().width;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        };</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        tpKeyEditor.setBackground(Color.DARK_GRAY);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="comment">// JOptionPane.showMessageDialog(new JFrame(), &quot;This software is still in development and is an incomplete software.\nIt is intended solely for testing purposes only.\nThe software contains incomplete features and possible bugs.&quot;, &quot;MIDI Converter Disclaimer&quot;, JOptionPane.WARNING_MESSAGE);</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        tpKeyEditor.setEditorKit(JEditorPane.createEditorKitForContentType(<span class="stringliteral">&quot;text/html&quot;</span>));</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        tpKeyEditor.setFont(<span class="keyword">new</span> Font(currentFont, Font.PLAIN, 12));</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="comment">// tpKeyEditor.setText(&quot;Welcome to MIDI to Computer Keys Converter! (0.7 Alpha)\r\n\r\nI mainly wrote this program in the hopes that it will help ease the conversion process of sheet music played in the \&quot;Playable Piano\&quot; mod of Garry&#39;s Mod Gmod Tower Servers. It can also compatible with the Virtual Piano website and it&#39;s community.\r\n\r\nThis software was created to provide and convert MIDI file formats into playable music sheets.\r\n\r\nTo get started, go to File &gt; Open MIDI&quot;);</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        tpKeyEditor.setEnabled(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="comment">// StyledDocument doc = tpKeyEditor.getStyledDocument();</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="comment">// Style def = StyleContext.getDefaultStyleContext().getStyle(StyleContext.DEFAULT_STYLE);</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="comment">// Style regular = doc.addStyle(&quot;regular&quot;, def);</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="comment">// Style s = doc.addStyle(&quot;bold&quot;, regular);</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="comment">// SimpleAttributeSet sas = new SimpleAttributeSet();</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="comment">// StyleConstants.setBold(sas, true);</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="comment">// tpKeyEditor.getStyledDocument().setCharacterAttributes(6, 3, sas, false);</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="comment">// Add scroll bar hierarchy</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        spKeyEditor = <span class="keyword">new</span> JScrollPane();</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        spKeyEditor.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        spKeyEditor.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        spKeyEditor.setViewportView(tpKeyEditor);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        wordWrapOn();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        tpKeyEditor.setFont(<span class="keyword">new</span> Font(currentFont, Font.PLAIN, currentFontSize));</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        tpKeyEditor.setText(<span class="stringliteral">&quot;Welcome to MIDI to Computer Keys Converter! (0.8 Alpha)\r\n\u266B\r\nThis program creates music sheets for Garry&#39;s Mod&#39;s \&quot;Playable Piano\&quot; Addon (by MacDGuy) from MIDI files:\r\nhttp://steamcommunity.com/sharedfiles/filedetails/?id=104548572\r\nand Virtual Piano ( virtualpiano.net )\r\n\r\n------------------------------------------------------\r\nProgrammed in Java using Eclipse Luna IDE, with WindowBuilder.\r\nSource code and this software is free and open source, and is under GNU GPL v3 license.\r\nOpening of Jar file permitted (Unencrypted and Unobfuscated). Written by Little Cute Lion, 2014\r\n\r\nPlay and Stop button Silk Icons are created by Mark James under Creative Commons Attribution 2.5 License. \r\n( http://www.famfamfam.com/lab/icons/silk/ )\r\n\r\nNote! This software is still in development and has incomplete features. If you have found cute looking bugs in the program, or for the latest updates of this software, please visit the forums of GMTower ( http://www.gmtower.org/ )\r\n\r\nEnjoy!&quot;</span>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> wordWrapOn()</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="comment">// String tmp = tpKeyEditor.getText();</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        tpKeyEditor = <span class="keyword">new</span> JTextPane();</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        tpKeyEditor.setEditable(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        tpKeyEditor.setForeground(Color.LIGHT_GRAY);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        tpKeyEditor.setBackground(Color.DARK_GRAY);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        tpKeyEditor.setFont(<span class="keyword">new</span> Font(currentFont, Font.PLAIN, currentFontSize));</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        spKeyEditor.setViewportView(tpKeyEditor);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> wordWrapOff()</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        String tmp = tpKeyEditor.getText();</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        tpKeyEditor = <span class="keyword">new</span> JTextPane()</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="comment">// Override so when setting String to the JTextPane, horizontal (width) works as intended</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            @Override</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">boolean</span> getScrollableTracksViewportWidth()</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                <span class="keywordflow">return</span> getUI().getPreferredSize(<span class="keyword">this</span>).width &lt;= getParent().getSize().width;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        };</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        tpKeyEditor.setBackground(Color.DARK_GRAY);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        tpKeyEditor.setFont(<span class="keyword">new</span> Font(currentFont, Font.PLAIN, currentFontSize));</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        tpKeyEditor.setEditable(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        tpKeyEditor.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        spKeyEditor.setViewportView(tpKeyEditor);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        tpKeyEditor.setText(tmp);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> initMenuBar()</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="comment">// Create the Main menu bar</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        menuBar = <span class="keyword">new</span> JMenuBar();</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        setJMenuBar(menuBar);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="comment">// Init all menu File GUI and logic</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        initMenuFile();</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="comment">// Init Instrument Menu</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        initMenuInstruments();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="comment">// Font Menu Init</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        mnFont = <span class="keyword">new</span> JMenu(<span class="stringliteral">&quot;Font&quot;</span>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        menuBar.add(mnFont);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        initMenuFontSize();</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        initMenuFontFamily();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="comment">// Init Help Menu</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        initMenuHelp();</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> initMenuHelp()</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        mnView = <span class="keyword">new</span> JMenu(<span class="stringliteral">&quot;View&quot;</span>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        menuBar.add(mnView);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        mntmColourNoteValues = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">&quot;Colour Reference&quot;</span>);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        mntmColourNoteValues.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                <span class="keywordflow">if</span> (!dialogColourReference.isVisible())</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                    dialogColourReference.setLocationRelativeTo(frameHolder);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                    dialogColourReference.setVisible(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                    dialogColourReference.toFront();</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        });</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        mntmOnscreenKeyboard = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">&quot;On-Screen Keyboard&quot;</span>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        mntmOnscreenKeyboard.addActionListener(<span class="keyword">new</span> ActionListener() {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                <span class="keywordflow">if</span> (!dialogOnScreenKeyboard.isVisible())</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                    dialogOnScreenKeyboard.setLocationRelativeTo(frameHolder);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                    dialogOnScreenKeyboard.setVisible(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                    dialogOnScreenKeyboard.toFront();</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        });</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        mntmOnscreenPiano = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">&quot;On-Screen Piano&quot;</span>);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        mntmOnscreenPiano.addActionListener(<span class="keyword">new</span> ActionListener() {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                <span class="keywordflow">if</span> (!dialogOnScreenPiano.isVisible())</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                    dialogOnScreenPiano.setLocationRelativeTo(frameHolder);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                    dialogOnScreenPiano.setVisible(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                    dialogOnScreenPiano.toFront();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        });</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        mnView.add(mntmOnscreenPiano);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        mnView.add(mntmOnscreenKeyboard);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        mnView.add(mntmColourNoteValues);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="comment">// TODO Auto-generated method stub</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        JMenu mnHelp = <span class="keyword">new</span> JMenu(<span class="stringliteral">&quot;Help&quot;</span>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="comment">// mnHelp.setBackground(Color.LIGHT_GRAY);</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        menuBar.add(mnHelp);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        JMenuItem mntmViewHelp = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">&quot;View Help&quot;</span>);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        mntmViewHelp.setEnabled(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        mntmViewHelp.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                <span class="comment">// JOptionPane.showMessageDialog(new JFrame(), &quot;MIDI to Computer Keys Converter is a software that creates piano sheet music from MIDI files that can be played on your computer keyboard.\n\nIt is specifically created for accompanied use with the game, \&quot;Garry&#39;s Mod\&quot;, specifically the \&quot;Playable Piano\&quot; workshop file that is used in GMTower servers ( http://www.gmtower.org/ ) and the Virtual Piano website ( virtualpiano.net )\n\nTo get started, download your favourite MIDI files by searching www.google.com\n\nThen simply go to File &gt; Open MIDI and select your downloaded MIDI file to begin.&quot;, &quot;Help&quot;, JOptionPane.PLAIN_MESSAGE);</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                JOptionPane.showMessageDialog(<span class="keyword">new</span> JFrame(), <span class="stringliteral">&quot;nope.&quot;</span>, <span class="stringliteral">&quot;Help&quot;</span>, JOptionPane.PLAIN_MESSAGE);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        });</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        mnHelp.add(mntmViewHelp);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        JMenuItem mntmAbout = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">&quot;About&quot;</span>);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        mntmAbout.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                dialogAbout.setLocationRelativeTo(frameHolder);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                dialogAbout.setVisible(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                <span class="comment">// dialogAbout.setLocation(x, y);</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        });</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        mnHelp.add(mntmAbout);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// Disables the &quot;New Folder&quot; button when opening files (as it is not necessary)</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// Source: Copy-paste from java2s.com</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> disableNewFolderButton(Container c)</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordtype">int</span> len = c.getComponentCount();</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; len; i++)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            Component comp = c.getComponent(i);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            <span class="keywordflow">if</span> (comp instanceof JButton)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                JButton b = (JButton) comp;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                Icon icon = b.getIcon();</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                <span class="keywordflow">if</span> (icon != null &amp;&amp; icon == UIManager.getIcon(<span class="stringliteral">&quot;FileChooser.newFolderIcon&quot;</span>))</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                    b.setEnabled(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (comp instanceof Container)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                disableNewFolderButton((Container) comp);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        }</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    }</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> initMenuFile()</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="comment">// TODO Auto-generated method stub</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        JMenu mnFile = <span class="keyword">new</span> JMenu(<span class="stringliteral">&quot;File&quot;</span>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        menuBar.add(mnFile);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="comment">// Menu Bar Open (Open Dialogue for MIDI</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        mntmOpen = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">&quot;Open MIDI&quot;</span>);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        mnFile.add(mntmOpen);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="comment">// Menu Bar Exit</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        JMenuItem mntmExit = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">&quot;Exit&quot;</span>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        mntmExit.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                System.exit(0);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        });</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="comment">// Menu Open File logic</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        mntmOpen.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                <span class="keywordflow">if</span> (lastDirectory == null)</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                    lastDirectory = (System.getProperty(<span class="stringliteral">&quot;user.home&quot;</span>) + <span class="stringliteral">&quot;\\Desktop&quot;</span>); <span class="comment">// Windows Vista/7/8</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                <span class="keyword">final</span> JFileChooser fileChooserOpenDialogue = <span class="keyword">new</span> JFileChooser(lastDirectory); <span class="comment">// If directory is not found, it results to default</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                fileChooserOpenDialogue.setPreferredSize(<span class="keyword">new</span> Dimension(575, 495));</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                disableNewFolderButton(fileChooserOpenDialogue);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                <span class="comment">// Apply file format filter for midi so only midi files can be chosen</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                FileExtensionFilter fileFilter = <span class="keyword">new</span> FileExtensionFilter(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                fileChooserOpenDialogue.addChoosableFileFilter(fileFilter);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                fileChooserOpenDialogue.setFileFilter(fileFilter);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                fileChooserOpenDialogue.setAcceptAllFileFilterUsed(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                <span class="comment">// File loaded, pass file to midi converter</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                <span class="keywordtype">int</span> returnVal = fileChooserOpenDialogue.showOpenDialog(MIDIConverterInit.this);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                <span class="comment">// Get the actual file to be used</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                <span class="keyword">final</span> File file = fileChooserOpenDialogue.getSelectedFile();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                <span class="keywordflow">if</span> (file != null)</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                    openFileName = file.getName();</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                    dirFileName = file.getAbsolutePath();</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                    lastDirectory = file.getParent();</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                <span class="comment">// load from file</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                <span class="keywordflow">if</span> (returnVal == JFileChooser.CANCEL_OPTION)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    progressBar.setIndeterminate(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                <span class="keywordflow">if</span> (returnVal == JFileChooser.APPROVE_OPTION)</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                    System.out.println(<span class="stringliteral">&quot;----------------------------------&quot;</span>);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                    <span class="comment">// if midiPlayer is still playing, stop</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                    <span class="keywordflow">if</span> (midiPlayer != null)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                        midiPlayer.stopMIDI();</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                    <span class="comment">// if timer for checking updates is still running, stop</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                    <span class="keywordflow">if</span> (autoplayTimer != null)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                        autoplayTimer.stop();</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                    <span class="comment">// Nested SwingWorker Class (Prevents GUI freezing when calculating time consuming functions from an EDT Thread)</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                    SwingWorker&lt;String, Void&gt; midiParserWorker = <span class="keyword">new</span> SwingWorker&lt;String, Void&gt;()</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                    {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                        @Override</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                        <span class="keyword">public</span> String doInBackground()</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                        {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                            <span class="comment">// Initiate the parser</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                            midiParser = <span class="keyword">new</span> MIDIParser(file);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                            <span class="comment">// Setup midiParser depending on what options are chosen in preferences</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                            <span class="keywordflow">if</span> (dialogPreferences.isAdvancedTrackImport())</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                            {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                                midiParser.setMeasurePerLine(dialogTrackImport.getMeasures());</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                                <span class="comment">// Start parsing data - this is the main task that freezes the GUI (Hence fixed by use of SwingWorker Class)</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                                midiParser.retrieveMidiData(dialogTrackImport.getSelectedTracks());</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                            }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                            {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                                midiParser.setMeasurePerLine(dialogPreferences.getMeasures());</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                                midiParser.retrieveMidiData(null); <span class="comment">// null = just import all tracks</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                            }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                        }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                        @Override</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                        <span class="keyword">public</span> <span class="keywordtype">void</span> done()</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                        {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                            <span class="comment">// Get parsed data</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                            tpKeyEditor.setText(midiParser.getParsedData());</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                            dialogOnScreenKeyboard.setText(midiParser.getParsedData());</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                            noteColourConverter = <span class="keyword">new</span> NoteColourConverter(tpKeyEditor.getStyledDocument(), midiParser.getEventTriggerTime(), midiParser.getQuarterNote());</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                            <span class="keywordflow">if</span> (dialogTrackImport.isColourise())</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                                tpKeyEditor.setStyledDocument(noteColourConverter.ColouriseNotes());</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                            tpKeyEditor.setCaretPosition(0);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                            tpKeyEditor.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                            <span class="comment">// tpKeyEditor.setEditable(true);</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                            <span class="comment">// Re-enable</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                            <span class="comment">// final StyleContext cont = StyleContext.getDefaultStyleContext();</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                            <span class="comment">// final AttributeSet color = cont.addAttribute(cont.getEmptySet(), StyleConstants.Foreground, new Color(192, 192, 192));</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                            <span class="comment">// tpKeyEditor.getStyledDocument().setCharacterAttributes(0, tpKeyEditor.getDocument().getLength(), color, false);</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                            <span class="comment">// System.out.println(&quot;tpKeyEditor: &quot; + tpKeyEditor.getText());</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                            progressBar.setIndeterminate(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                            progressBar.setValue(100);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                            progressBar.setString(<span class="stringliteral">&quot;Loaded File - &quot;</span> + openFileName);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                            midiPlayer = <span class="keyword">new</span> MIDIPlayer(<span class="keyword">new</span> File(dirFileName));</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                            <span class="comment">// Set user volume</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                            midiPlayer.setVolume(sliderVolume.getValue());</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                            midiPlayer.setInstrument(currentPatchNum);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                            btnPlay.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                            btnPlay.setText(<span class="stringliteral">&quot;Play&quot;</span>);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                            btnPlay.setIcon(<span class="keyword">new</span> ImageIcon(getClass().getResource(<span class="stringliteral">&quot;/resources/images/control_play_blue.png&quot;</span>)));</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                            btnStop.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                            mntmSave.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                            sliderTime.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                            sliderTime.setMaximum((<span class="keywordtype">int</span>) midiPlayer.getTickLength());</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                            sliderTime.setMinimum(0);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                            sliderTime.setValue(0);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                            </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                            spinnerSpeed.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                            <span class="comment">/*// If Colour was selected, open a colour value reference window</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">                            if (dialogTrackImport.isColourise())</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">                            {</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">                                if (!dialogColourReference.isVisible())</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">                                {</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">                                    dialogColourReference.setLocationRelativeTo(frameHolder);</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">                                    dialogColourReference.setVisible(true);</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">                                }</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">                            }*/</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                            <span class="comment">// Apply default instrument menu</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                            <span class="comment">// deselectInstrumentMenu();</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                            <span class="comment">// chckbxmntmUseMidiDefault.setSelected(true);</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                        }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                    };</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                    <span class="keywordflow">if</span> (dialogPreferences.isAdvancedTrackImport())</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                    {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                        dialogTrackImport = <span class="keyword">new</span> DialogTrackImport(frameHolder, file);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                        dialogTrackImport.setLocationRelativeTo(frameHolder);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                        dialogTrackImport.setVisible(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                        <span class="keywordflow">if</span> (dialogTrackImport.getSelectedButton() == DialogTrackImport.OK_BUTTON)</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                        {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                            System.out.println();</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                            System.out.println(<span class="stringliteral">&quot;Loading &quot;</span> + openFileName);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                            <span class="comment">// MIDI Parser Preparation</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                            <span class="keywordflow">if</span> (!dialogTrackImport.isCustomMeasure())</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                            { <span class="comment">// Word Wrap on</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                                wordWrapOn();</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                            }</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                            { <span class="comment">// Word wrap off</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                                wordWrapOff();</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                            }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                            <span class="comment">// GUI Loading Setup</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                            progressBar.setIndeterminate(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                            progressBar.setString(<span class="stringliteral">&quot;Please wait, Parsing: &quot;</span> + openFileName);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                            tpKeyEditor.setText(<span class="stringliteral">&quot;Please Wait...&quot;</span>);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                            System.out.println(<span class="stringliteral">&quot;dialogImportOptions.getMeasures() : &quot;</span> + dialogPreferences.getMeasures());</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                            <span class="comment">// get user input here</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                            midiParserWorker.execute();</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                        }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dialogTrackImport.getSelectedButton() == DialogTrackImport.CANCEL_BUTTON)</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                        {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                            <span class="comment">// do nothing, add later here if cancel operations need be here</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                        }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                    }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                    {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                        <span class="comment">// MIDI Parser Preparation</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                        <span class="keywordflow">if</span> (!dialogPreferences.isCustomMeasure())</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                        { <span class="comment">// Word Wrap on</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                            wordWrapOn();</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                        }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                        { <span class="comment">// Word wrap off</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                            wordWrapOff();</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                        }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                        <span class="comment">// midiParser.setMeasurePerLine(dialogPreferences.getMeasures());</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                        midiParserWorker.execute();</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                    }</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        });</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        mntmSave = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">&quot;Save To Text&quot;</span>);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        mntmSave.setEnabled(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        mntmSave.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                tpKeyEditor.setEnabled(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                JFileChooser fileChooserDialogueSave = <span class="keyword">new</span> JFileChooser(lastDirectory)</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                { <span class="comment">// Copy paste from stack overflow, thank you kmindi</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                    <span class="keyword">public</span> <span class="keywordtype">void</span> approveSelection()</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                    {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                        File f = getSelectedFile();</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                        <span class="keywordflow">if</span> (f.exists() &amp;&amp; getDialogType() == SAVE_DIALOG)</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                        {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                            Toolkit.getDefaultToolkit().beep();</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                            <span class="keywordtype">int</span> result = JOptionPane.showConfirmDialog(<span class="keyword">this</span>, <span class="stringliteral">&quot;The file exists, overwrite?&quot;</span>, <span class="stringliteral">&quot;Existing file&quot;</span>, JOptionPane.YES_NO_OPTION);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                            <span class="keywordflow">switch</span> (result)</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                            {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                            <span class="keywordflow">case</span> JOptionPane.YES_OPTION:</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                                super.approveSelection();</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                            <span class="keywordflow">case</span> JOptionPane.CANCEL_OPTION:</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                                cancelSelection();</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                            }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                        }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                        super.approveSelection();</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                    }</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                };</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                <span class="comment">// Apply file format filter for midi so only midi files can be chosen</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                FileExtensionFilter fileFilter = <span class="keyword">new</span> FileExtensionFilter(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                fileChooserDialogueSave.addChoosableFileFilter(fileFilter);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                fileChooserDialogueSave.setFileFilter(fileFilter);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                fileChooserDialogueSave.setAcceptAllFileFilterUsed(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                fileChooserDialogueSave.setPreferredSize(<span class="keyword">new</span> Dimension(575, 495));</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                <span class="comment">// openFileName</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                String noExtensionName = openFileName.substring(0, openFileName.length() - 4);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                fileChooserDialogueSave.setSelectedFile(<span class="keyword">new</span> File(noExtensionName + <span class="stringliteral">&quot;.txt&quot;</span>));</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                <span class="comment">// File loaded, pass file to midi converter</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                <span class="keywordtype">int</span> returnVal = fileChooserDialogueSave.showSaveDialog(MIDIConverterInit.this);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <span class="comment">// load from file</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                <span class="keywordflow">if</span> (returnVal == JFileChooser.APPROVE_OPTION)</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                    File file = fileChooserDialogueSave.getSelectedFile();</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                    <span class="comment">// if user didnt type an extension, make one</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                    String file_name = file.toString();</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                    <span class="keywordflow">if</span> (!file_name.endsWith(<span class="stringliteral">&quot;.txt&quot;</span>))</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                    {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                        file_name += <span class="stringliteral">&quot;.txt&quot;</span>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                        file.renameTo(<span class="keyword">new</span> File(file_name));</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                    }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                    <span class="comment">// We got the file, write the text to file</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                    <span class="keywordflow">try</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                    {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                        Writer newTextFile = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(file));</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                        BufferedWriter fw = <span class="keyword">new</span> BufferedWriter(newTextFile);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                        fw.write(tpKeyEditor.getText());</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                        fw.close();</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                    } <span class="keywordflow">catch</span> (IOException iox)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                    {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                        <span class="comment">// do stuff with exception</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                        iox.printStackTrace();</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                    }</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        });</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        mnFile.add(mntmSave);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        mnFile.addSeparator();</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        JMenuItem mntmPreferences = <span class="keyword">new</span> JMenuItem(<span class="stringliteral">&quot;Preferences&quot;</span>);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        mnFile.add(mntmPreferences);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        mntmPreferences.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                dialogPreferences.setLocationRelativeTo(frameHolder);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                dialogPreferences.setVisible(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            }</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        });</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        mnFile.addSeparator();</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        mnFile.add(mntmExit);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> initMenuFontFamily()</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> initMenuFontSize()</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="comment">// TODO Auto-generated method stub</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        JMenu mnFamily = <span class="keyword">new</span> JMenu(<span class="stringliteral">&quot;Family&quot;</span>);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        mnFont.add(mnFamily);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        mntmLucidaConsole = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Lucida Console&quot;</span>);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        mntmLucidaConsole.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                deselectFontFamilyMenu();</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                mntmLucidaConsole.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                currentFont = <span class="stringliteral">&quot;Lucida Console&quot;</span>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                Font font = <span class="keyword">new</span> Font(<span class="stringliteral">&quot;Lucida Console&quot;</span>, Font.PLAIN, tpKeyEditor.getFont().getSize());</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        });</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        mnFamily.add(mntmLucidaConsole);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        mntmTahoma = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Tahoma&quot;</span>);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        mntmTahoma.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                deselectFontFamilyMenu();</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                mntmTahoma.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                currentFont = <span class="stringliteral">&quot;Tahoma&quot;</span>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                Font font = <span class="keyword">new</span> Font(<span class="stringliteral">&quot;Tahoma&quot;</span>, Font.PLAIN, tpKeyEditor.getFont().getSize());</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        });</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        mnFamily.add(mntmTahoma);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        mntmVerdana = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Verdana&quot;</span>);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        mntmVerdana.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        mntmVerdana.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                deselectFontFamilyMenu();</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                mntmVerdana.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                currentFont = <span class="stringliteral">&quot;Verdana&quot;</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                Font font = <span class="keyword">new</span> Font(<span class="stringliteral">&quot;Verdana&quot;</span>, Font.PLAIN, tpKeyEditor.getFont().getSize());</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        });</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        mnFamily.add(mntmVerdana);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        mntmSegoeUi = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Segoe UI&quot;</span>);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        mntmSegoeUi.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                deselectFontFamilyMenu();</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                mntmSegoeUi.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                currentFont = <span class="stringliteral">&quot;Segoe UI&quot;</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                Font font = <span class="keyword">new</span> Font(<span class="stringliteral">&quot;Segoe UI&quot;</span>, Font.PLAIN, tpKeyEditor.getFont().getSize());</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            }</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        });</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        mnFamily.add(mntmSegoeUi);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="comment">// TODO Auto-generated method stub</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        JMenu mnSize = <span class="keyword">new</span> JMenu(<span class="stringliteral">&quot;Size&quot;</span>);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        mnFont.add(mnSize);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        mntmSize_8 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Size 8&quot;</span>);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        mntmSize_8.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                deselectFontSizeMenu();</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                mntmSize_8.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                Font font = <span class="keyword">new</span> Font(currentFont, Font.PLAIN, 8);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                currentFontSize = 8;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        });</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        mnSize.add(mntmSize_8);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        mntmSize_10 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Size 10&quot;</span>);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        mntmSize_10.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                deselectFontSizeMenu();</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                mntmSize_10.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                Font font = <span class="keyword">new</span> Font(currentFont, Font.PLAIN, 10);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                currentFontSize = 10;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            }</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        });</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        mnSize.add(mntmSize_10);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        mntmSize_12 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Size 12&quot;</span>);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        mntmSize_12.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        mntmSize_12.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                deselectFontSizeMenu();</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                mntmSize_12.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                Font font = <span class="keyword">new</span> Font(currentFont, Font.PLAIN, 12);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                currentFontSize = 12;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            }</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        });</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        mnSize.add(mntmSize_12);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        mntmSize_14 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Size 14&quot;</span>);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        mntmSize_14.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                deselectFontSizeMenu();</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                mntmSize_14.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                Font font = <span class="keyword">new</span> Font(currentFont, Font.PLAIN, 14);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                currentFontSize = 14;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            }</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        });</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        mnSize.add(mntmSize_14);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        mntmSize_16 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Size 16&quot;</span>);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        mntmSize_16.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;            {</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                deselectFontSizeMenu();</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                mntmSize_16.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                Font font = <span class="keyword">new</span> Font(currentFont, Font.PLAIN, 16);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                currentFontSize = 16;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;            }</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        });</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        mnSize.add(mntmSize_16);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        mntmSize_18 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Size 18&quot;</span>);</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        mntmSize_18.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                deselectFontSizeMenu();</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                mntmSize_18.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                Font font = <span class="keyword">new</span> Font(currentFont, Font.PLAIN, 18);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                currentFontSize = 18;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;            }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        });</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        mnSize.add(mntmSize_18);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        mntmSize_24 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Size 24&quot;</span>);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        mntmSize_24.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                deselectFontSizeMenu();</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                mntmSize_24.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                Font font = <span class="keyword">new</span> Font(currentFont, Font.PLAIN, 24);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                currentFontSize = 24;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;            }</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        });</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        mnSize.add(mntmSize_24);</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        mntmSize_36 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Size 36&quot;</span>);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        mntmSize_36.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                deselectFontSizeMenu();</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                mntmSize_36.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                Font font = <span class="keyword">new</span> Font(currentFont, Font.PLAIN, 36);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                currentFontSize = 36;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;            }</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        });</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        mnSize.add(mntmSize_36);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        mntmSize_48 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Size 48&quot;</span>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        mntmSize_48.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                deselectFontSizeMenu();</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                mntmSize_48.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                Font font = <span class="keyword">new</span> Font(currentFont, Font.PLAIN, 48);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                tpKeyEditor.setFont(font);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                currentFontSize = 48;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        });</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        mnSize.add(mntmSize_48);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    }</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> initMenuInstruments()</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <span class="comment">// TODO Auto-generated method stub</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        JMenu mnInstrument = <span class="keyword">new</span> JMenu(<span class="stringliteral">&quot;Instrument&quot;</span>);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        menuBar.add(mnInstrument);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        chckbxmntmAcousticGrandPiano = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Acoustic Grand Piano&quot;</span>);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        chckbxmntmAcousticGrandPiano.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent arg0)</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                changeInstrument(0);</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                chckbxmntmAcousticGrandPiano.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            }</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        });</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        mnInstrument.add(chckbxmntmAcousticGrandPiano);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        chckbxmntmBrightAcousticPiano = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Bright Acoustic Piano&quot;</span>);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        chckbxmntmBrightAcousticPiano.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;            {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                changeInstrument(1);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                chckbxmntmBrightAcousticPiano.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        });</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        mnInstrument.add(chckbxmntmBrightAcousticPiano);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        chckbxmntmElectricGrandPiano = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Electric Grand Piano&quot;</span>);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        chckbxmntmElectricGrandPiano.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        {</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            {</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                changeInstrument(2);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                chckbxmntmElectricGrandPiano.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            }</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        });</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        mnInstrument.add(chckbxmntmElectricGrandPiano);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        chckbxmntmHonkyTonkPiano = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Honky-tonk Piano&quot;</span>);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        chckbxmntmHonkyTonkPiano.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                changeInstrument(3);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                chckbxmntmHonkyTonkPiano.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;            }</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        });</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        mnInstrument.add(chckbxmntmHonkyTonkPiano);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        chckbxmntmElectricPiano1 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Electric Piano 1&quot;</span>);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        chckbxmntmElectricPiano1.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        {</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;            {</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                changeInstrument(4);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                chckbxmntmElectricPiano1.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        });</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        mnInstrument.add(chckbxmntmElectricPiano1);</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        chckbxmntmElectricPiano2 = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Electric Piano 2&quot;</span>);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        chckbxmntmElectricPiano2.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                changeInstrument(5);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                chckbxmntmElectricPiano2.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;            }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        });</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        mnInstrument.add(chckbxmntmElectricPiano2);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        chckbxmntmHarpsichord = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Harpsichord&quot;</span>);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        chckbxmntmHarpsichord.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                changeInstrument(6);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                chckbxmntmHarpsichord.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        });</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        mnInstrument.add(chckbxmntmHarpsichord);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        chckbxmntmClavinet = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Clavinet&quot;</span>);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        chckbxmntmClavinet.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;            {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                changeInstrument(7);</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                chckbxmntmClavinet.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        });</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        mnInstrument.add(chckbxmntmClavinet);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        chckbxmntmUseMidiDefault = <span class="keyword">new</span> JCheckBoxMenuItem(<span class="stringliteral">&quot;Use MIDI Default Instruments&quot;</span>);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        chckbxmntmUseMidiDefault.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        chckbxmntmUseMidiDefault.addActionListener(<span class="keyword">new</span> ActionListener()</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> actionPerformed(ActionEvent e)</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            {</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                changeInstrument(-1);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                chckbxmntmUseMidiDefault.setSelected(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            }</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        });</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        mnInstrument.add(chckbxmntmUseMidiDefault);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    }</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> deselectInstrumentMenu()</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        chckbxmntmAcousticGrandPiano.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        chckbxmntmBrightAcousticPiano.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        chckbxmntmElectricGrandPiano.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        chckbxmntmUseMidiDefault.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        chckbxmntmHonkyTonkPiano.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        chckbxmntmElectricPiano1.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        chckbxmntmElectricPiano2.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        chckbxmntmHarpsichord.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        chckbxmntmClavinet.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    }</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> changeInstrument(<span class="keywordtype">int</span> patchNum)</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        deselectInstrumentMenu();</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <span class="keywordflow">if</span> (midiPlayer != null)</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            midiPlayer.setInstrument(patchNum);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            currentPatchNum = patchNum;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        }</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    }</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> deselectFontSizeMenu()</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    {</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        mntmSize_8.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        mntmSize_10.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        mntmSize_12.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        mntmSize_14.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        mntmSize_16.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        mntmSize_18.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        mntmSize_24.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        mntmSize_36.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        mntmSize_48.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> deselectFontFamilyMenu()</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    {</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        mntmLucidaConsole.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        mntmTahoma.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        mntmVerdana.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        mntmSegoeUi.setSelected(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    }</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;}</div>
<div class="ttc" id="namespacecom_1_1lclion_1_1midiparser_html"><div class="ttname"><a href="namespacecom_1_1lclion_1_1midiparser.html">com.lclion.midiparser</a></div><div class="ttdef"><b>Definition:</b> <a href="_key_converter_8java_source.html#l00001">KeyConverter.java:1</a></div></div>
<div class="ttc" id="namespacecom_html"><div class="ttname"><a href="namespacecom.html">com</a></div></div>
<div class="ttc" id="classcom_1_1lclion_1_1midiplayer_1_1_m_i_d_i_player_html"><div class="ttname"><a href="classcom_1_1lclion_1_1midiplayer_1_1_m_i_d_i_player.html">com.lclion.midiplayer.MIDIPlayer</a></div><div class="ttdef"><b>Definition:</b> <a href="_m_i_d_i_player_8java_source.html#l00031">MIDIPlayer.java:31</a></div></div>
<div class="ttc" id="classcom_1_1lclion_1_1midiparser_1_1_note_colour_converter_html"><div class="ttname"><a href="classcom_1_1lclion_1_1midiparser_1_1_note_colour_converter.html">com.lclion.midiparser.NoteColourConverter</a></div><div class="ttdef"><b>Definition:</b> <a href="_note_colour_converter_8java_source.html#l00012">NoteColourConverter.java:12</a></div></div>
<div class="ttc" id="classcom_1_1lclion_1_1midiparser_1_1_m_i_d_i_parser_html"><div class="ttname"><a href="classcom_1_1lclion_1_1midiparser_1_1_m_i_d_i_parser.html">com.lclion.midiparser.MIDIParser</a></div><div class="ttdef"><b>Definition:</b> <a href="_m_i_d_i_parser_8java_source.html#l00048">MIDIParser.java:48</a></div></div>
<div class="ttc" id="namespacecom_1_1lclion_1_1midiplayer_html"><div class="ttname"><a href="namespacecom_1_1lclion_1_1midiplayer.html">com.lclion.midiplayer</a></div><div class="ttdef"><b>Definition:</b> <a href="_m_i_d_i_player_8java_source.html#l00001">MIDIPlayer.java:1</a></div></div>
<div class="ttc" id="namespacecom_1_1lclion_1_1utils_html"><div class="ttname"><a href="namespacecom_1_1lclion_1_1utils.html">com.lclion.utils</a></div><div class="ttdef"><b>Definition:</b> <a href="_file_extension_filter_8java_source.html#l00001">FileExtensionFilter.java:1</a></div></div>
<div class="ttc" id="classcom_1_1lclion_1_1utils_1_1_file_extension_filter_html"><div class="ttname"><a href="classcom_1_1lclion_1_1utils_1_1_file_extension_filter.html">com.lclion.utils.FileExtensionFilter</a></div><div class="ttdef"><b>Definition:</b> <a href="_file_extension_filter_8java_source.html#l00009">FileExtensionFilter.java:9</a></div></div>
<div class="ttc" id="namespacecom_1_1lclion_html"><div class="ttname"><a href="namespacecom_1_1lclion.html">com.lclion</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_541eb0a6c58a7690acc5b848a4b1b724.html">com</a></li><li class="navelem"><a class="el" href="dir_a3d20b871e2040f97f0973a31447f96f.html">lclion</a></li><li class="navelem"><a class="el" href="dir_12c7b9e8ec1aa9c18e4118a58ed309dd.html">midigui</a></li><li class="navelem"><a class="el" href="_m_i_d_i_converter_init_8java.html">MIDIConverterInit.java</a></li>
    <li class="footer">Generated on Wed Oct 1 2014 12:59:11 for MIDIPianoSheetCreator by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
